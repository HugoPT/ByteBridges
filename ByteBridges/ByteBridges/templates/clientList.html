{% extends 'base_template.html' %} {%block extra_css%} {% load static %}
<link rel="stylesheet" type="text/css" href="{% static 'css/tables.css' %}" />
{%endblock%}{% block content %}

<div class="listContainer">
  <h1>Lista de Clientes</h1>

  <table id="clientsTable" class="display">
    <thead>
      <tr>
        <th>Nome</th>
        <th>NIF</th>
        <th>Morada</th>
        <th>Cidade</th>
        <th>Cod.Postal</th>
        <th>Email</th>
        <th>Actions</th>  <!-- New column for buttons -->
      </tr>
    </thead>
    <tbody>
      {% for c in clients %}
      <tr>
        <td>{{ c.name }}</td>
        <td>{{ c.nif }}</td>
        <td>{{ c.address }}</td>
        <td>{{ c.city }}</td>
        <td>{{ c.zipCode }}</td>
        <td><a href="mailto:{{ c.email }}">{{ c.email }}</a></td>
        <td>
            <a href="{% url 'confirmation_delete' client_id=c.idclient %}" class="delete-btn">Delete</a>
            <button class="edit-btn" data-client-id="{{ c.id }}">Edit</button>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<script>
  $(document).ready(function () {
    $("#clientsTable").DataTable({
      dom: "Bfrtip",
      buttons: ["copyHtml5", "excelHtml5", "csvHtml5", "pdfHtml5"],
      language: {
        url: "//cdn.datatables.net/plug-ins/1.13.7/i18n/pt-PT.json",
      },
    });

    // Add event listeners for delete and edit buttons
    $("#clientsTable").on("click", ".delete-btn", function() {
      var clientId = $(this).data("client-id");
      // Perform delete operation or redirect to delete view with the client ID
    });

    $("#clientsTable").on("click", ".edit-btn", function() {
      var clientId = $(this).data("client-id");
      // Redirect to edit view with the client ID
    });
  });
</script>

{% endblock %}
